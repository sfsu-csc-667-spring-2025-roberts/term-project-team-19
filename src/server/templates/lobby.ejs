<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Skip-bo | Lobby</title>
  <%- include('shared/head') %>

  <!-- Load Socket.IOâ€™s client bundle -->
  <script src="/socket.io/socket.io.js"></script>

  <!-- Then load your own ES modules -->
  <script type="module" src="/js/socket/index.js"></script>
  <script type="module" src="/js/chat/index.js"></script>
</head>

<body>
  <%- include('shared/menu') %>

  <h1>Welcome <%= user.email %></h1>
  <a id="test-click-me" href="#">Click me</a>

  <script>
    document.getElementById('test-click-me').addEventListener('click', function (e) {
      e.preventDefault();

      fetch("/test/socket", { credentials: "include" })
        .then((response) => {
          if (!response.ok) {
            throw new Error("Network is not ok");
          }
          return response.json();
        })
        .then((data) => {
          console.log(data);
        })
        .catch((error) => {
          console.error("there was a problem with the fetch operation: ", error);
        });
    });
  </script>

  <ul>
    <li>id: <%= user.id %></li>
    <li>gravatar: <%= user.gravatar %></li>
  </ul>
</body>
</html>
